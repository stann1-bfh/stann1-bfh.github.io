(globalThis["webpackChunkklarachat"]=globalThis["webpackChunkklarachat"]||[]).push([[364],{2364:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>I});var s=a(9835),n=a(1957);const o={class:"q-pa-md row justify-center"},r={style:{width:"100%","max-width":"100%"}},l={class:"chatInputArea"};function c(e,t,a,c,i,u){const h=(0,s.up)("chat-history"),d=(0,s.up)("q-btn"),p=(0,s.up)("q-input");return(0,s.wg)(),(0,s.iD)("div",o,[(0,s._)("div",r,[((0,s.wg)(),(0,s.j4)(h,{key:e.snapshot,"chat-messages":e.allMessages},null,8,["chat-messages"]))]),(0,s._)("div",l,[(0,s.Wm)(d,{class:"chatinput",color:"primary",label:"Send",onClick:e.sendMessage,tabindex:"2"},null,8,["onClick"]),(0,s.Wm)(p,{ref:"userChatInput",class:"chatinput",outlined:"",modelValue:e.chatMessage,"onUpdate:modelValue":t[0]||(t[0]=t=>e.chatMessage=t),label:"Schreib eine Nachricht",onKeyup:(0,n.D2)(e.sendMessage,["enter"]),tabindex:"1"},null,8,["modelValue","onKeyup"])])])}var i=a(499);const u={ref:"scrollTarget",class:"q-pa-md"},h={class:"row justify-center q-my-md"};function d(e,t,n,o,r,l){const c=(0,s.up)("q-chat-message"),i=(0,s.up)("q-spinner-dots"),d=(0,s.up)("q-infinite-scroll"),p=(0,s.up)("q-scroll-area");return(0,s.wg)(),(0,s.j4)(p,{visible:!0,class:"chatwindow"},{default:(0,s.w5)((()=>[(0,s._)("div",u,[(0,s.Wm)(d,{onLoad:t[0]||(t[0]=(t,a)=>e.onLoad(t,a)),offset:200,reverse:""},{loading:(0,s.w5)((()=>[(0,s._)("div",h,[(0,s.Wm)(i,{color:"primary",size:"40px"})])])),default:(0,s.w5)((()=>[e.displayedMessages.length>0?((0,s.wg)(!0),(0,s.iD)(s.HY,{key:0},(0,s.Ko)(e.displayedMessages,((e,t)=>((0,s.wg)(),(0,s.iD)("div",{key:t},[(0,s.Wm)(c,{name:e.name,text:e.text,avatar:a(2424)("./"+e.avatar),sent:e.sent,stamp:e.stamp.stamp,"bg-color":e.bgcolor},null,8,["name","text","avatar","sent","stamp","bg-color"])])))),128)):(0,s.kq)("",!0)])),_:1})],512)])),_:1})}var p=a(2311);function g(e){let t=[];return e.forEach((function(e,a){a<2*p.d.LOADING_INTERVAL&&(0===t.length?t.push(e):t.unshift(e))})),t}const m=(0,s.aZ)({name:"ChatHistory",props:{chatMessages:{type:Array,required:!0}},setup(e){const t=(0,i.iH)(null);let a=(0,i.iH)(g(e.chatMessages));return{displayedMessages:a,scrollTarget:t,onLoad(t,s){setTimeout((()=>{const t=a.value.length+p.d.LOADING_INTERVAL,n=[];e.chatMessages.forEach((e=>{0!==n.length?!n.includes(e)&&n.length<t&&n.unshift(e):n.push(e)})),a.value=n.slice(),s()}),1500)}}}});var f=a(1639),v=a(6663),y=a(6870),w=a(396),b=a(7501),M=a(9984),k=a.n(M);const x=(0,f.Z)(m,[["render",d]]),q=x;k()(m,"components",{QScrollArea:v.Z,QInfiniteScroll:y.Z,QChatMessage:w.Z,QSpinnerDots:b.Z});var C=function(e,t,a,s){function n(e){return e instanceof a?e:new a((function(t){t(e)}))}return new(a||(a=Promise))((function(a,o){function r(e){try{c(s.next(e))}catch(t){o(t)}}function l(e){try{c(s["throw"](e))}catch(t){o(t)}}function c(e){e.done?a(e.value):n(e.value).then(r,l)}c((s=s.apply(e,t||[])).next())}))};const Z=(0,s.aZ)({name:"IndexPage",components:{ChatHistory:q},data(){return{chatMessage:"",snapshot:0,allMessages:(0,i.iH)(this.$chatcontroller.chatdata)}},methods:{sendMessage(){return C(this,void 0,void 0,(function*(){let e=this.chatMessage;this.chatMessage="",""!==e&&(this.snapshot=this.$chatcontroller.newUserMessage(e),this.snapshot=yield this.$chatcontroller.sendMessageToChatbot(e),this.snapshot=0)}))}}});var _=a(8556),A=a(6867);const D=(0,f.Z)(Z,[["render",c]]),I=D;k()(Z,"components",{QBtn:_.Z,QInput:A.Z})},9304:(e,t,a)=>{e.exports=a.p+"img/defaultAvatar.a218a63b.png"},9169:(e,t,a)=>{e.exports=a.p+"img/klarabotKlara.b2deb25c.png"},2424:(e,t,a)=>{var s={"./defaultAvatar.png":9304,"./klarabotKlara.png":9169};function n(e){var t=o(e);return a(t)}function o(e){if(!a.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}n.keys=function(){return Object.keys(s)},n.resolve=o,e.exports=n,n.id=2424}}]);